{"$schema":"https://vega.github.io/schema/vega/v5.json","axes":[{"format":"%ss","formatType":"time","orient":"top","scale":"scale$x"},{"format":"%ss","formatType":"time","orient":"bottom","scale":"scale$x"},{"format":"~s","orient":"left","scale":"scale$statValue","title":{"signal":"ui$view"}}],"config":{"axis":{"grid":true,"gridColor":"#ccc","gridOpacity":1,"gridWidth":0.5,"labelPadding":10,"tickSize":5,"tickWidth":0.5},"background":"#fff","legend":{"labelBaseline":"middle","labelFontSize":11,"symbolSize":50,"symbolType":"square"}},"data":[{"name":"data$stats","values":[]},{"name":"data$streams","values":[]},{"name":"data$drivers","values":[]},{"name":"view$stats","source":"data$stats","transform":[{"expr":"pids[datum.p]&&datum.s==sig$view","type":"filter"}]},{"name":"view$streams","source":"data$streams","transform":[{"expr":"pids[datum.p]&&sig$streamTypes[datum.s]","type":"filter"},{"as":"yScale","expr":"datum.y*sig$streamTypes[datum.s]/sig$visibleStreams","type":"formula"}]},{"name":"data$hidden","on":[{"toggle":"sig$legendClicks","trigger":"sig$legendClicks"}]}],"legends":[{"encode":{"labels":{"interactive":true,"name":"legendLabel"},"symbols":{"interactive":true,"name":"legendSymbol","update":{"opacity":[{"test":"!indata('data$hidden','name',datum.value)","value":1},{"value":0.15}],"size":{"value":50},"strokeWidth":{"value":2}}}},"padding":4,"stroke":"scale$legend","title":"Driver"}],"marks":[{"from":{"facet":{"data":"view$stats","groupby":"p","name":"series"}},"marks":[{"encode":{"enter":{"strokeWidth":{"value":2}},"update":{"stroke":{"field":"p","scale":"scale$color"},"x":{"field":"x","scale":"scale$x"},"y":{"field":"y","scale":"scale$statValue"}}},"from":{"data":"series"},"type":"line"}],"type":"group"},{"encode":{"update":{"height":{"signal":"cfg$streamHeight"},"width":{"signal":"width"},"y":{"signal":"cfg$statHeight"},"yc":{"band":0.5,"field":"i","scale":"scale$streamLayout"}}},"from":{"facet":{"data":"view$streams","groupby":["p","i","s"],"name":"violin"}},"marks":[{"encode":{"enter":{"fill":{"field":{"parent":"p"},"scale":"scale$color"}},"update":{"height":{"field":"yScale","scale":"scale$streamHeight"},"x":{"field":"x","scale":"scale$x"},"y":{"signal":"sig$computedStreamHeight"}}},"from":{"data":"violin"},"type":"area"}],"type":"group"}],"padding":30,"scales":[{"domain":{"data":"data$stats","field":"x"},"name":"scale$x","range":"width","type":"point"},{"domain":{"data":"view$stats","field":"y"},"name":"scale$statValue","nice":true,"range":[{"signal":"cfg$statHeight"},0],"type":"linear","zero":true},{"domain":{"data":"data$stats","field":"p"},"name":"scale$color","range":"category","type":"ordinal"},{"domain":{"data":"data$drivers","field":"name"},"name":"scale$legend","range":"category","type":"ordinal"},{"domain":{"data":"view$streams","field":"y"},"name":"scale$streamHeight","nice":true,"range":[0,{"signal":"cfg$streamHeight"}],"type":"linear","zero":true},{"domain":{"data":"view$streams","field":"i"},"name":"scale$streamLayout","range":[{"signal":"cfg$statHeight + cfg$statPadding"},{"signal":"height"}],"type":"band"}],"signals":[{"bind":{"input":"checkbox","name":"Send streams"},"name":"ui$sendStreams","value":false},{"bind":{"input":"checkbox","name":"Receive streams"},"name":"ui$recvStreams","value":false},{"name":"sig$visibleStreams","update":"(ui$sendStreams?1:0)+(ui$recvStreams?1:0)","value":2},{"name":"cfg$statHeight","value":500},{"name":"cfg$statPadding","value":10},{"name":"cfg$streamHeight","value":60},{"name":"sig$computedStreamHeight","update":"sig$visibleStreams == 2 ? cfg$streamHeight / 2 : ( ui$sendStreams ? cfg$streamHeight : 0)"},{"name":"height","update":"cfg$statHeight + (cfg$statPadding + cfg$streamHeight * sig$streamCount) * (sig$visibleStreams>0?1:0)"},{"name":"sig$legendClicks","on":[{"events":"@legendSymbol:click, @legendLabel:click","force":true,"update":"{name:datum.value}"}],"value":null},{"bind":{"input":"select","name":"View","options":["cpu %","memory (bytes)","virtual memory (bytes)","cycles","instructions","branches","context-switches","syscalls","alloc (bytes)","alloc (count)","realloc (bytes)","realloc (count)","dealloc (bytes)","dealloc (count)","send (bytes)","send (count)","send (bytes/cpu %)","send (bytes/instruction)","receive (bytes)","receive (count)","receive (bytes/cpu %)","receive (bytes/instruction)","stream send","stream receive"]},"name":"ui$view","value":"cpu %"},{"name":"sig$view","update":"indexof([\"cpu %\", \"memory (bytes)\", \"virtual memory (bytes)\", \"cycles\", \"instructions\", \"branches\", \"context-switches\", \"syscalls\", \"alloc (bytes)\", \"alloc (count)\", \"realloc (bytes)\", \"realloc (count)\", \"dealloc (bytes)\", \"dealloc (count)\", \"send (bytes)\", \"send (count)\", \"send (bytes/cpu %)\", \"send (bytes/instruction)\", \"receive (bytes)\", \"receive (count)\", \"receive (bytes/cpu %)\", \"receive (bytes/instruction)\", \"stream send\", \"stream receive\"],ui$view)","value":"0"},{"name":"pids","update":"[]","value":"[]"},{"name":"sig$streamCount","update":"0"},{"name":"sig$streamTypes","update":"{22:(ui$sendStreams?-1:0),23:(ui$recvStreams?1:0)}"}],"title":"","width":1000}